{"version":3,"file":"index.cjs.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/GuideContext.tsx","../src/generateId.ts","../src/useHandlePosition.tsx","../src/ActionDrivenComponent/index.tsx","../src/TourComponent/index.tsx","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { createContext, useMemo, useState } from \"react\";\r\n\r\nexport interface IGuide {\r\n  mode?: \"tour\" | \"action-driven\";\r\n  nextStep?: any;\r\n  previousStep?: any;\r\n  run: boolean;\r\n  setStep: any;\r\n  setTotal?: any;\r\n  step: number;\r\n  total?: number;\r\n}\r\n\r\nconst GuideContext = createContext<IGuide>({\r\n  mode: \"action-driven\",\r\n  nextStep: () => {},\r\n  previousStep: () => {},\r\n  run: true,\r\n  setStep: () => {},\r\n  setTotal: () => {},\r\n  step: 1,\r\n  total: 1,\r\n});\r\n\r\nexport default GuideContext;\r\n\r\ninterface IGuideProvider {\r\n  value?: Partial<IGuide>;\r\n  children?: any;\r\n}\r\n\r\nexport function GuideProvider({ value = {}, children }: IGuideProvider) {\r\n  const [step, setStep] = useState(1);\r\n  const [total, setTotal] = useState(1);\r\n\r\n  const nextStep = () =>\r\n    value.setStep && value.step ? value.setStep(value.step + 1) : setStep(step + 1);\r\n  const previousStep = () =>\r\n    value.setStep && value.step ? value.setStep(value.step - 1) : setStep(step - 1);\r\n\r\n  const defaultValue: IGuide = useMemo(\r\n    () => ({\r\n      mode: \"action-driven\",\r\n      nextStep,\r\n      previousStep,\r\n      run: true,\r\n      setStep,\r\n      setTotal,\r\n      step,\r\n      total,\r\n    }),\r\n    [nextStep, previousStep]\r\n  );\r\n\r\n  return (\r\n    <GuideContext.Provider value={{ ...defaultValue, ...value }}>\r\n      {children}\r\n    </GuideContext.Provider>\r\n  );\r\n}\r\n","let index = 1;\r\nexport default function generateId(name: string) {\r\n  return name + \"-\" + index++;\r\n}\r\n","import { RefObject, useCallback, useMemo } from \"react\";\r\n\r\ninterface IOptions {\r\n  add: {\r\n    top?: number;\r\n    left?: number;\r\n    right?: number;\r\n    bottom?: number;\r\n  };\r\n  position: (\"left\" | \"right\" | \"top\" | \"bottom\")[];\r\n}\r\n\r\nfunction useHandlePosition<T extends HTMLBaseElement>(\r\n  ref: RefObject<T>,\r\n  refParent: RefObject<any>,\r\n  options: IOptions = {\r\n    add: {\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    position: [],\r\n  }\r\n) {\r\n  // Get position of screen\r\n  const pScreen = useMemo(() => {\r\n    return {\r\n      x: 0,\r\n      y: 0,\r\n      height: window.innerHeight,\r\n      width: window.innerWidth,\r\n    };\r\n  }, []);\r\n\r\n  const _calPositionOfRef = useCallback(\r\n    (x: number, y: number) => {\r\n      const p = ref.current?.getBoundingClientRect();\r\n\r\n      return {\r\n        bottom: p?.bottom || 0 + y,\r\n        height: p?.height || 0,\r\n        left: p?.left || 0 + x,\r\n        right: p?.right || 0 + x,\r\n        top: p?.top || 0 + y,\r\n        width: p?.width || 0,\r\n        x: p?.x || 0 + x,\r\n        y: p?.y || 0 + y,\r\n      };\r\n    },\r\n    [ref.current]\r\n  );\r\n\r\n  const _handlePosition = useCallback(() => {\r\n    if (ref.current) {\r\n      let translateY: number = 0,\r\n        translateX: number = 0,\r\n        transformOriginX: string = \"\",\r\n        transformOriginY: string = \"\";\r\n\r\n      const pParent = refParent.current.firstChild.getBoundingClientRect();\r\n      let pElement = _calPositionOfRef(translateX, translateY);\r\n\r\n      /**\r\n       * Set default position of element\r\n       */\r\n      if (options.position.indexOf(\"top\") >= 0) {\r\n        translateY = pParent.top - pElement.height - (options.add.top || 0);\r\n      } else if (options.position.includes(\"bottom\")) {\r\n        translateY = pParent.bottom + (options.add.bottom || 0);\r\n      } else {\r\n        translateY = pParent.top + pParent.height / 2 - pElement.height / 2;\r\n      }\r\n\r\n      if (options.position.indexOf(\"right\") >= 0) {\r\n        translateX = pParent.left + pParent.width + (options.add.right || 0);\r\n      } else if (options.position.includes(\"left\")) {\r\n        translateX = pParent.left - pElement.width - (options.add.left || 0);\r\n      } else {\r\n        translateX = pParent.left + pParent.width / 2 - pElement.width / 2;\r\n      }\r\n\r\n      // Cal again position of element to continue calculating position\r\n      pElement = _calPositionOfRef(translateX, translateY);\r\n\r\n      /**\r\n       * Set case is overload\r\n       */\r\n      // Cal again position of Element\r\n      // When it is more than height of screen\r\n      if (translateY + pElement.height > pScreen.height) {\r\n        translateY = pScreen.height - pElement.height - 10;\r\n      }\r\n\r\n      if (translateY < 0) {\r\n        translateY = 10;\r\n      }\r\n\r\n      // When it is more than width of screen\r\n      if (translateX + pElement.width > pScreen.width) {\r\n        translateX = pScreen.width - pElement.width - 10;\r\n      }\r\n\r\n      if (translateX < 0) {\r\n        translateX = 10;\r\n      }\r\n\r\n      ref.current.style.top = translateY + \"px\";\r\n      ref.current.style.left = translateX + \"px\";\r\n      ref.current.style.transformOrigin = `${transformOriginX} ${transformOriginY}`;\r\n      ref.current.style.visibility = \"visible\";\r\n    }\r\n  }, [ref.current, refParent.current]);\r\n\r\n  return {\r\n    handlePosition: _handlePosition,\r\n  };\r\n}\r\n\r\nexport default useHandlePosition;\r\n","import \"./style.css\";\r\n\r\nimport React, { useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport GuideContext from \"./../GuideContext\";\r\nimport ReactDOM from \"react-dom\";\r\nimport generateId from \"../generateId\";\r\nimport icon from \"./../guide.svg\";\r\nimport useHandlePosition from \"../useHandlePosition\";\r\n\r\ninterface Props {\r\n  children: JSX.Element;\r\n  position?: (\"left\" | \"right\" | \"top\" | \"bottom\")[];\r\n  step: number;\r\n  text?: string;\r\n  type?: \"button\" | \"input\";\r\n}\r\n\r\nexport default function ({\r\n  children,\r\n  position = [\"bottom\", \"left\"],\r\n  step,\r\n  text,\r\n  type = \"button\",\r\n}: Props) {\r\n  const id = useMemo(() => generateId(\"action-driven\"), []);\r\n  const ref = useRef<any>(null);\r\n  const { run, step: stepContext, setStep, nextStep } = useContext(\r\n    GuideContext\r\n  );\r\n  const [active, setActive] = useState(false);\r\n  const refChildren = useRef<any>(null);\r\n\r\n  const { handlePosition } = useHandlePosition(refChildren, ref, {\r\n    position,\r\n    add: {},\r\n  });\r\n\r\n  const _skip = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setStep(0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setActive(run && step === stepContext);\r\n  }, [stepContext, run, step]);\r\n\r\n  useEffect(() => {\r\n    if (type === \"input\") {\r\n      const ele = ref.current?.getElementsByTagName(\"input\")?.[0];\r\n      ele?.focus();\r\n      ele?.addEventListener(\"blur\", (e: any) => {\r\n        if (e.target.value) {\r\n          nextStep();\r\n        }\r\n      });\r\n\r\n      return () => {\r\n        ele?.removeEventListener(\"blur\", (e: any) => {\r\n          if (e.target.value) {\r\n            nextStep();\r\n          }\r\n        });\r\n      };\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    active && handlePosition();\r\n  }, [active]);\r\n\r\n  return active ? (\r\n    <div className=\"w-guide\">\r\n      <div className=\"w-guide-mark\" />\r\n      <div ref={ref} className=\"w-guide-wrap\">\r\n        {React.cloneElement(children, {\r\n          onClick: (e: any) => {\r\n            children.props.onClick && children.props.onClick(e);\r\n            type !== \"input\" && nextStep();\r\n          },\r\n          id,\r\n          className:\r\n            children.props.className +\r\n            (type === \"button\"\r\n              ? \" w-guide-tap-click\"\r\n              : type === \"input\"\r\n              ? \" w-guide-input\"\r\n              : \" \"),\r\n        })}\r\n      </div>\r\n      {ReactDOM.createPortal(\r\n        <div ref={refChildren} className={`w-guide-text ${position.join(\" \")}`}>\r\n          <img src={icon} />\r\n          <div className=\"w-guide-container\">\r\n            <div>{text}</div>\r\n            <button className=\"w-guide-skip\" onClick={_skip}>\r\n              Skip all\r\n            </button>\r\n          </div>\r\n        </div>,\r\n        document.getElementsByTagName(\"body\")[0]\r\n      )}\r\n    </div>\r\n  ) : (\r\n    children\r\n  );\r\n}\r\n","import \"./style.css\";\r\n\r\nimport React, { useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport GuideContext from \"./../GuideContext\";\r\nimport ReactDOM from \"react-dom\";\r\nimport generateId from \"../generateId\";\r\nimport useHandlePosition from \"../useHandlePosition\";\r\n\r\ninterface Props {\r\n  children: JSX.Element;\r\n  position?: (\"left\" | \"right\" | \"top\" | \"bottom\")[];\r\n  step: number;\r\n  title?: string;\r\n  message?: string;\r\n}\r\n\r\nexport default function ({\r\n  children,\r\n  position = [\"bottom\", \"left\"],\r\n  step,\r\n  title,\r\n  message,\r\n}: Props) {\r\n  const id = useMemo(() => generateId(\"tour-component\"), []);\r\n  const refChildren = useRef<any>(null);\r\n  const ref = useRef<any>(null);\r\n  const { run, step: stepContext, nextStep, total, setStep } = useContext(\r\n    GuideContext\r\n  );\r\n  const [active, setActive] = useState(false);\r\n  const { handlePosition } = useHandlePosition(refChildren, ref, {\r\n    position,\r\n    add: {\r\n      top: 10,\r\n      left: 10,\r\n      right: 10,\r\n      bottom: 10,\r\n    },\r\n  });\r\n\r\n  const _skip = () => {\r\n    setStep(0);\r\n  };\r\n\r\n  const _renderStep = useMemo(() => {\r\n    const _total = total || 0;\r\n    let html: any = [];\r\n    for (let i = 1; i <= _total; i++) {\r\n      html.push(<div key={i} className={stepContext === i ? \"active\" : \"\"} />);\r\n    }\r\n\r\n    return html;\r\n  }, [total, stepContext]);\r\n\r\n  useEffect(() => {\r\n    setActive(run && step === stepContext);\r\n  }, [stepContext, run, step]);\r\n\r\n  useEffect(() => {\r\n    active && handlePosition();\r\n  }, [active]);\r\n\r\n  return active ? (\r\n    <div className=\"w-guide\">\r\n      <div className=\"w-guide-mark\" />\r\n      <div ref={ref} className=\"w-guide-wrap\">\r\n        {React.cloneElement(children, {\r\n          onClick: () => {},\r\n          id,\r\n          className:\r\n            (children.props.className || \"\") +\r\n            ` w-guide-tour-arrow ${position.join(\" \")} w-guide-relative`,\r\n        })}\r\n      </div>\r\n      {ReactDOM.createPortal(\r\n        <div\r\n          ref={refChildren}\r\n          className={`w-guide-tour-cp ${position.join(\" \")}`}\r\n        >\r\n          {title && <div className=\"w-guide-tour-title\">{title}</div>}\r\n          {message && <div className=\"w-guide-tour-message\">{message}</div>}\r\n          <div className=\"w-guide-tour-footer\">\r\n            <button className=\"w-guide-tour-skip\" onClick={_skip}>\r\n              Skip\r\n            </button>\r\n            <button className=\"w-guide-tour-next\" onClick={nextStep}>\r\n              {step === total ? \"Finish\" : \"Next\"}\r\n            </button>\r\n          </div>\r\n          <div className=\"w-guide-tour-step\">\r\n            {_renderStep && _renderStep.map((ele: any) => ele)}\r\n          </div>\r\n        </div>,\r\n        document.getElementsByTagName(\"body\")[0]\r\n      )}\r\n    </div>\r\n  ) : (\r\n    children\r\n  );\r\n}\r\n","import \"./style.css\";\r\n\r\nimport Context, { GuideProvider as Provider } from \"./GuideContext\";\r\nimport React, { useContext } from \"react\";\r\n\r\nimport ActionDrivenComponent from \"./ActionDrivenComponent\";\r\nimport TourComponent from \"./TourComponent\";\r\n\r\ninterface Props {\r\n  children: JSX.Element;\r\n  message?: string;\r\n  position?: (\"left\" | \"right\" | \"top\" | \"bottom\")[];\r\n  step: number;\r\n  text?: string;\r\n  title?: string;\r\n  type?: \"button\" | \"input\";\r\n}\r\n\r\nexport default function Guide(props: Props) {\r\n  const { mode } = useContext(Context);\r\n\r\n  return mode === \"action-driven\" ? (\r\n    <ActionDrivenComponent {...props} />\r\n  ) : (\r\n    <TourComponent {...props} />\r\n  );\r\n}\r\n\r\nexport const GuideContext = Context;\r\nexport const GuideProvider = Provider;\r\nexport interface IGuide {\r\n  mode?: \"tour\" | \"action-driven\";\r\n  nextStep?: any;\r\n  previousStep?: any;\r\n  run: boolean;\r\n  setStep: any;\r\n  setTotal?: any;\r\n  step: number;\r\n  total?: number;\r\n};"],"names":["GuideContext","createContext","GuideProvider","useState","useMemo","React","useCallback","useRef","useContext","useEffect","ReactDOM","Context","Provider"],"mappings":"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"}