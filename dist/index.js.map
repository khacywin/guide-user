{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/GuideContext.tsx","../src/ActionDrivenComponent/index.tsx","../src/TourComponent/index.tsx","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { createContext, useState } from \"react\";\n\nexport interface IGuide {\n  step: number;\n  run: boolean;\n  nextStep?: any;\n  mode?: \"tour\" | \"action-driven\";\n  total?: number;\n  setStep: any;\n  setTotal?: any;\n}\n\nconst GuideContext = createContext<IGuide>({\n  step: 1,\n  total: 1,\n  run: true,\n  mode: \"action-driven\",\n  nextStep: () => {},\n  setStep: () => {},\n  setTotal: () => {},\n});\n\nexport default GuideContext;\n\ninterface IGuideProvider {\n  value?: Partial<IGuide>;\n  children?: any;\n}\nexport function GuideProvider({ value, children }: IGuideProvider) {\n  const [step, setStep] = useState(1);\n  const [total, setTotal] = useState(1);\n  \n  const nextStep = () => setStep(step + 1);\n\n  const defaultValue: IGuide = {\n    step,\n    setStep,\n    setTotal,\n    nextStep,\n    run: true,\n    total,\n    mode: \"action-driven\",\n  };\n\n  return (\n    <GuideContext.Provider value={{ ...defaultValue, ...value }}>\n      {children}\n    </GuideContext.Provider>\n  );\n}\n","import \"./style.css\";\n\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\nimport GuideContext from \"./../GuideContext\";\n\ninterface Props {\n  children: JSX.Element;\n  position?: \"left\" | \"right\" | \"top\" | \"bottom\";\n  step: number;\n  text?: string;\n  type?: \"button\" | \"input\";\n}\n\nexport default function ({\n  children,\n  position = \"bottom\",\n  step,\n  text,\n  type = \"button\",\n}: Props) {\n  const { run, step: stepContext, setStep } = useContext(GuideContext);\n  const [active, setActive] = useState(false);\n\n  const _onClickCapture = useCallback(() => {\n    setStep(stepContext + 1);\n  }, [stepContext]);\n\n  const _preventClickEvent = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  }, []);\n\n  useEffect(() => {\n    setActive(run && step === stepContext);\n  }, [stepContext, run, step]);\n\n  return active ? (\n    <div className=\"w-guide\">\n      <div className=\"w-guide-mark\" />\n      <div\n        className=\"w-guide-wrap\"\n        onClickCapture={_onClickCapture}\n      >\n        {React.cloneElement(children, {\n          children: (\n            <>\n              {children.props.children}\n              <div className={`w-guide-text ${position}`} onClick={_preventClickEvent}>\n                {text}\n              </div>\n            </>\n          ),\n          className:\n            children.props.className +\n            (type === \"button\" ? \" w-guide-tap-click\" : type === 'input' ? \" w-guide-input\" : \" \"),\n        })}\n      </div>\n    </div>\n  ) : (\n    children\n  );\n}","import \"./style.css\";\n\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\n\nimport GuideContext from \"./../GuideContext\";\n\ninterface Props {\n  children: JSX.Element;\n  position?: \"left\" | \"right\" | \"top\" | \"bottom\";\n  step: number;\n  title?: string;\n  message?: string;\n}\n\nexport default function ({\n  children,\n  position = \"bottom\",\n  step,\n  title,\n  message,\n}: Props) {\n  const { run, step: stepContext, nextStep, total } = useContext(GuideContext);\n  const [active, setActive] = useState(false);\n\n  const _preventClickEvent = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  }, []);\n\n  useEffect(() => {\n    setActive(run && step === stepContext);\n  }, [stepContext, run, step]);\n\n  useEffect(() => {}, []);\n\n  return active ? (\n    <div className=\"w-guide\">\n      <div className=\"w-guide-mark\" />\n      <div className=\"w-guide-wrap\">\n        {React.cloneElement(children, {\n          children: (\n            <>\n              {children.props.children}\n              <div\n                className={`w-guide-tour-cp ${position}`}\n                onClick={_preventClickEvent}\n              >\n                {title && <div className=\"w-guide-tour-title\">{title}</div>}\n                {message && (\n                  <div className=\"w-guide-tour-message\">{message}</div>\n                )}\n                <div className=\"w-guide-tour-footer\">\n                  <div className=\"w-guide-tour-step\">\n                    Step <strong>{step}</strong>/{total}\n                  </div>\n                  <button className=\"w-guide-tour-next\" onClick={nextStep}>\n                    {step === total ? 'Finish' : 'Next'}\n                  </button>\n                </div>\n              </div>\n            </>\n          ),\n          onClick: () => {},\n          className: children.props.className + ` w-guide-tour-arrow ${position} w-guide-relative`,\n        })}\n      </div>\n    </div>\n  ) : (\n    children\n  );\n}\n","import \"./style.css\";\n\nimport GuideContext, { GuideProvider, IGuide } from \"./GuideContext\";\nimport React, { useContext } from \"react\";\n\nimport ActionDrivenComponent from \"./ActionDrivenComponent\";\nimport TourComponent from \"./TourComponent\";\n\ninterface Props {\n  children: JSX.Element;\n  message?: string;\n  position?: \"left\" | \"right\" | \"top\" | \"bottom\";\n  step: number;\n  text?: string;\n  title?: string;\n  type?: \"button\" | \"input\";\n}\n\nexport default function (props: Props) {\n  const { mode } = useContext(GuideContext);\n\n  return mode === \"action-driven\" ? (\n    <ActionDrivenComponent {...props} />\n  ) : (\n    <TourComponent {...props} />\n  );\n}\n\nexport { GuideContext, GuideProvider, IGuide };\n"],"names":[],"mappings":"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"}C,CAAC;IAE1C,OAAO,IAAI,KAAK,eAAe,IAC7BD,wCAAC,qBAAqB,oBAAK,KAAK,EAAI,KAEpCA,wCAAC,aAAa,oBAAK,KAAK,EAAI,CAC7B,CAAC;AACJ;;;;;;"}